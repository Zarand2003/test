<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Canvas teszt – kijelző méret</title>

<style>
  html, body {
    margin: 0;
    padding: 0;
    background: #111;
    height: 100%;
    overflow: hidden;
  }

  #info {
    position: fixed;
    top: 0;
    width: 100%;
    background: rgba(0,0,0,0.6);
    color: #0f0;
    font-family: monospace;
    font-size: 12px;
    padding: 6px;
    z-index: 10;
  }

  canvas {
    position: absolute;
    top: 0;
    left: 0;

    /* CSS MÉRET = TELJES KIJELZŐ */
    width: 100vw;
    height: 100vh;

    background: #222;
    touch-action: none;
  }
</style>
</head>

<body>

<div id="info">initial</div>
<canvas id="c"></canvas>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");
const info = document.getElementById("info");

function resize() {
  const dpr = window.devicePixelRatio;

  // TELJES KIJELZŐ (screen)
  const sw = screen.width;
  const sh = screen.height;

  // Vászon FIZIKAI mérete
  canvas.width  = sw * dpr;
  canvas.height = sh * dpr;

  // Debug info
  info.textContent =
    `screen: ${sw}x${sh} | ` +
    `viewport: ${window.innerWidth}x${window.innerHeight} | ` +
    `canvas(px): ${canvas.width}x${canvas.height} | ` +
    `dpr: ${dpr}`;

  ctx.strokeStyle = "#0f0";
  ctx.lineWidth = 4 * dpr;
  ctx.strokeRect(0, 0, canvas.width, canvas.height);
}

resize();
window.addEventListener("resize", resize);

/* RAJZOLÁS – BIZTOSAN MŰKÖDIK */
let drawing = false;

function pos(e) {
  const r = canvas.getBoundingClientRect();
  const x = (e.touches ? e.touches[0].clientX : e.clientX) - r.left;
  const y = (e.touches ? e.touches[0].clientY : e.clientY) - r.top;

  return {
    x: x * (canvas.width / r.width),
    y: y * (canvas.height / r.height)
  };
}

canvas.addEventListener("mousedown", e => { drawing = true; });
canvas.addEventListener("mouseup", () => drawing = false);
canvas.addEventListener("mousemove", e => {
  if (!drawing) return;
  const p = pos(e);
  ctx.fillStyle = "#fff";
  ctx.beginPath();
  ctx.arc(p.x, p.y, 8 * devicePixelRatio, 0, Math.PI * 2);
  ctx.fill();
});

canvas.addEventListener("touchstart", e => { drawing = true; });
canvas.addEventListener("touchend", () => drawing = false);
canvas.addEventListener("touchmove", e => {
  e.preventDefault();
  if (!drawing) return;
  const p = pos(e);
  ctx.fillStyle = "#fff";
  ctx.beginPath();
  ctx.arc(p.x, p.y, 8 * devicePixelRatio, 0, Math.PI * 2);
  ctx.fill();
});
</script>

</body>
</html>
